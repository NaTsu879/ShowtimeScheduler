<!--We know there exists a "movies" array and a "genres" array here-->
<!--Now the "movie list container" generates container boxes with the info from every element
        it is to note that each element name is again converted to "movie"
        so to access the data u need to use movie.something

        now we go to genre-select 
        on genre select the label is just to show genre beside the genre box
        then it loads all the values from "genres array"

        now lets speak of the moviefilter.js
        there is a listener attatched to the document and it executes a function 
         -->


<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous" />
  <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
    crossorigin="anonymous"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.7.0/nouislider.min.css" rel="stylesheet">
  <link rel="stylesheet" href="./styles/moviestyle.css" />
  <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css" />
  <!-- Include your stylesheets and scripts here -->
  <title>Movies</title>
</head>

<body>
  <%- include('header', { active: 'movies' }) %>

    <main>
      <h1 class="top-title">Movies</h1>
      <div class="section-container">
        <div class="movie-list-container" id="movies-list">
          <% movies.forEach(movie=> { %>
            <div class="movie" data-genre="<%= movie.Genres.join(', ') %>" data-rating="<%= movie.RATING %>">
              <a href="/Movies/<%= movie.MOVIEID %>" class="movie-container">
                <div class="image-container">
                  <img src="<%= movie.POSTER %>" alt="Movie Poster" />
                  <div class="rating-container">
                    <span class="rating">
                      <%= movie.RATING %>
                    </span>
                    <div class="rating-circle"></div>
                  </div>
                </div>
                <div class="text-container">
                  <h4 class="movie-title">
                    <%= movie.TITLE %>
                  </h4>
                  <p class="movie-genres">
                    <% movie.Genres.forEach(genre=> { %>
                      <span class="genre">
                        <%= genre %>
                      </span>
                      <% }); %>
                  </p>
                </div>
              </a>
            </div>
            <% }); %>
        </div>

        <!-- Filtering dropdown -->
        <div class="filters-container">
          <h1 class="filter-title">Filters</h1>
          <h2>Genre:</h2>
          <select id="genre-select">
            <option value="all">All Genres</option>
            <% genres.forEach(genre=> { %>
              <option value="<%= genre %>">
                <%= genre %>
              </option>
              <% }); %>
          </select>
          <h2>Rating:</h2>
          <!--<select id="genre-select">
            <option value="all">All Genres</option>
            <% genres.forEach(genre=> { %>
              <option value="<%= genre %>">
                <%= genre %>
              </option>
              <% }); %>
          </select>-->
          <div class="slider-container" id="slider"></div>
            <div class="values">
              <span id="value1"></span>
              <span id="value2"></span>
            </div>

          </div>
        </div>
    </main>

    <%- include('footer')%>

      <script src="/js/movieFilter.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.7.0/nouislider.min.js"></script>
      <script>
        const slider = document.getElementById('slider');
        const value1 = document.getElementById('value1');
        const value2 = document.getElementById('value2');

        noUiSlider.create(slider, {
          start: [0, 5],
          connect: true,
          range: {
            'min': 0,
            'max': 5
          },
          step: 0.1
        });

        slider.noUiSlider.on('update', (values, handle) => {
          if (handle === 0) {
            value1.textContent = parseFloat(values[handle]).toFixed(1);
          } else {
            value2.textContent = parseFloat(values[handle]).toFixed(1);
          }
        });
      </script>
</body>

</html>